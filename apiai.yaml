intents:
  greetings:
    speech: Hi there!
    async_action: True
  gettemp:
    speech: It is currently {{ states('sensor.netatmo_indoor_temperature') }} degrees
    async_action: True
  smarthome.lights.switch.on:
    async_action: False
    speech: Ok
    action:
      - service: homeassistant.turn_on
        data_template:
          entity_id: "light.{{ room | lower | replace(' ', '_') }}"
  smarthome.lights.switch.off:
    async_action: False
    speech: Ok
    action:
      - service: homeassistant.turn_off
        data_template:
          entity_id: "light.{{ room | lower | replace(' ', '_') }}"
  smarthome.heating.check:
    async_action: False
    speech: >
      {% if room is defined and room != "" %}
      {% for state in states.sensor if (state.name | lower).find('temp') != -1 and (state.name | lower).find(room) != -1 -%}
        {%- if loop.first -%}
          It is {{ state.state }} degrees in the {{ room }}.
        {%- endif -%}
      {%- else -%}  
      It is {{ states('sensor.netatmo_indoor_temperature') }} degrees.
      {%- endfor %}
      {% else %}
      It is {{ states('sensor.netatmo_indoor_temperature') }} degrees.
      {% endif %}
